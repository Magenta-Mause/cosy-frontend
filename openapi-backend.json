{"openapi":"3.1.0","info":{"title":"Cosy API","description":"Management API for Cosy (Cost Optimised Server Yard).","contact":{"name":"Cosy Team","url":"https://github.com/magenta-mause"},"license":{"name":"MIT","url":"https://opensource.org/licenses/MIT"},"version":"v1.0"},"servers":[{"url":"http://localhost:8080/api","description":"Generated server url"}],"security":[{"Bearer Authentication":[]}],"paths":{"/user-invites":{"get":{"tags":["user-invite-controller"],"operationId":"getAllUserInvites","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UserInviteDto"}}}}}}},"post":{"tags":["user-invite-controller"],"operationId":"createInvite","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserInviteCreationDto"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserInviteDto"}}}}}}},"/user-invites/use/{secretKey}":{"post":{"tags":["user-invite-controller"],"operationId":"useInvite","parameters":[{"name":"secretKey","in":"path","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserCreationDto"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserEntityDto"}}}}}}},"/game-server-configurations":{"get":{"tags":["game-server-configuration-controller"],"operationId":"getAllGameServers","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/GameServerDto"}}}}}}},"post":{"tags":["game-server-configuration-controller"],"operationId":"createGameServer","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GameServerCreationDto"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/GameServerDto"}}}}}}},"/auth/logout":{"post":{"tags":["authorization-controller"],"operationId":"logout","responses":{"200":{"description":"OK"}}}},"/auth/login":{"post":{"tags":["authorization-controller"],"operationId":"login","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginDto"}}},"required":true},"responses":{"200":{"description":"OK"}}}},"/user-invites/{secretKey}":{"get":{"tags":["user-invite-controller"],"operationId":"getUserInvite","parameters":[{"name":"secretKey","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserInviteDto"}}}}}}},"/user-entity":{"get":{"tags":["user-entity-controller"],"operationId":"getAllUserEntities","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/UserEntityDto"}}}}}}}},"/user-entity/{uuid}":{"get":{"tags":["user-entity-controller"],"operationId":"getUserEntity","parameters":[{"name":"uuid","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserEntityDto"}}}}}},"delete":{"tags":["user-entity-controller"],"operationId":"deleteUserEntity","parameters":[{"name":"uuid","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK"}}}},"/game-server-configurations/{uuid}":{"get":{"tags":["game-server-configuration-controller"],"operationId":"getGameServerById","parameters":[{"name":"uuid","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/GameServerDto"}}}}}},"delete":{"tags":["game-server-configuration-controller"],"operationId":"deleteGameServerById","parameters":[{"name":"uuid","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK"}}}},"/auth/token":{"get":{"tags":["authorization-controller"],"operationId":"fetchToken","parameters":[{"name":"refreshToken","in":"cookie","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/":{"get":{"tags":["root-controller"],"operationId":"root","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/user-invites/{uuid}":{"delete":{"tags":["user-invite-controller"],"operationId":"revokeInvite","parameters":[{"name":"uuid","in":"path","required":true,"schema":{"type":"string"}}],"responses":{"200":{"description":"OK"}}}}},"components":{"schemas":{"UserInviteCreationDto":{"type":"object","properties":{"username":{"type":"string"},"role":{"type":"string","enum":["OWNER","ADMIN","QUOTA_USER"],"minLength":1}},"required":["role"]},"UserInviteDto":{"type":"object","properties":{"uuid":{"type":"string"},"username":{"type":"string"},"invited_by":{"type":"string"},"invite_by_username":{"type":"string"},"secret_key":{"type":"string"},"created_at":{"type":"string","format":"date-time"}}},"UserCreationDto":{"type":"object","properties":{"username":{"type":"string"},"password":{"type":"string","maxLength":2147483647,"minLength":8}},"required":["password"]},"UserEntityDto":{"type":"object","properties":{"uuid":{"type":"string"},"username":{"type":"string"},"role":{"type":"string","enum":["OWNER","ADMIN","QUOTA_USER"]}}},"EnvironmentVariableConfiguration":{"type":"object","properties":{"key":{"type":"string","minLength":1},"value":{"type":"string","minLength":1}},"required":["key","value"]},"GameServerCreationDto":{"type":"object","properties":{"game_uuid":{"type":"string","minLength":1},"server_name":{"type":"string","minLength":1},"template":{"type":"string","minLength":1},"docker_image_name":{"type":"string","minLength":1},"docker_image_tag":{"type":"string","minLength":1},"port_mappings":{"type":"array","items":{"$ref":"#/components/schemas/PortMapping"}},"execution_command":{"type":"array","items":{"type":"string","minLength":1}},"environment_variables":{"type":"array","items":{"$ref":"#/components/schemas/EnvironmentVariableConfiguration"}},"volume_mounts":{"type":"array","items":{"$ref":"#/components/schemas/VolumeMountConfigurationCreationDto"}}},"required":["docker_image_name","docker_image_tag","game_uuid","server_name","template"]},"PortMapping":{"type":"object","properties":{"instance_port":{"type":"integer","format":"int32","maximum":65535,"minimum":1},"container_port":{"type":"integer","format":"int32","maximum":65535,"minimum":1},"protocol":{"type":"string","enum":["TCP","UDP"]}}},"VolumeMountConfigurationCreationDto":{"type":"object","properties":{"host_path":{"type":"string","minLength":1},"container_path":{"type":"string","minLength":1}},"required":["container_path","host_path"]},"GameServerDto":{"type":"object","properties":{"uuid":{"type":"string","minLength":1},"server_name":{"type":"string","minLength":1},"owner":{"$ref":"#/components/schemas/UserEntityDto"},"status":{"type":"string","enum":["RUNNING","STARTING","SHUTTING_DOWN","STOPPED","FAILED"]},"timestamp_last_started":{"type":"string","format":"date-time"},"game_uuid":{"type":"string","minLength":1},"docker_image_name":{"type":"string","minLength":1},"docker_image_tag":{"type":"string","minLength":1},"template":{"type":"string"},"execution_command":{"type":"array","items":{"type":"string"}},"port_mappings":{"type":"array","items":{"$ref":"#/components/schemas/PortMapping"}},"environment_variables":{"type":"array","items":{"$ref":"#/components/schemas/EnvironmentVariableConfiguration"}},"volume_mounts":{"type":"array","items":{"$ref":"#/components/schemas/VolumeMountConfiguration"}}},"required":["docker_image_name","docker_image_tag","environment_variables","game_uuid","owner","port_mappings","server_name","status","timestamp_last_started","uuid","volume_mounts"]},"VolumeMountConfiguration":{"type":"object","properties":{"uuid":{"type":"string"},"hostPath":{"type":"string"},"containerPath":{"type":"string"}}},"LoginDto":{"type":"object","properties":{"username":{"type":"string","minLength":1},"password":{"type":"string","minLength":1}},"required":["password","username"]}},"securitySchemes":{"Bearer Authentication":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}}}}